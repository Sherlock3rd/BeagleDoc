# 🤝 Light Social & Multi-Channel City Design (轻社交与多线路主城机制)

> **Status**: Draft
> **Linked to**: [brain.md](../brain.md)
> **Core Concept**: 动态分线 (Sharding) + 实体主城 (Persistent City) + 移动基地 (Mobile Base)

## 1. 背景与现状 (Context & Background)

### 1.1 背景 (Background)
常规 MMO 为了解决地图人数过少（缺乏陪伴感）或过多（资源争抢/卡顿）的问题，通常采用 **动态分线 (Dynamic Sharding/Layering)**。但这与本项目 **“主城大地图实体可见”** 的核心设定存在根本冲突。

### 1.2 现状 (Current Status)
*   **冲突点**:
    *   **割裂感**: 朋友在 Line 1，我在 Line 2，虽然坐标相同但互相看不见。
    *   **交互难**: 无法直接去朋友家串门，缺乏自然的社交契机。
    *   **迁移难**: 深度社交（如公会集结、CP同居）需要“物理距离”的靠近，但跨线搬家面临坐标被占用的技术难题。
*   **目标**: 设计一套机制，既能享受分线带来的性能/资源优势，又能保留大地图社交的真实感和连接感。

### 1.3 Roadmap (Thinking Process)
本方案的推导与产出路径如下：
1.  **核心冲突定义**: 明确“动态分线”与“实体主城”的矛盾点。
2.  **竞品拆解**: 分析 WoW (位面)、Sky (虚影)、Warpath (基地车) 的解决方案。
3.  **发散设计**: 构思三套不同维度的方案（保守/融合/激进），重点强化**“生人破冰”**的设计。
4.  **决策收敛**: 基于 SLG + MMO 的项目特性，选中 **方案 B (融合派)**。
5.  **细节完善**: 深化“基地车迁移”与“动森式拜访”的具体规则。
6.  **后续验证**: 输出技术预研需求与原型测试计划。

---

## 2. 核心参考与拆解 (Benchmarks & Analysis)

在设计具体方案前，我们深入拆解了行业内的经典解决方案，分析其优劣及对 Beagle 的启示。

### 2.1 传统 MMO (WoW / FF14) - *分线的基础*
*   **机制**: 动态分层 (Layering)。当区域过载时自动创建新镜像。玩家只能通过组队将队友“拉”到同一位面。
*   **优点**: 技术成熟，性能稳定。
*   **缺点**: 社交割裂感强，必须“有目的”地组队才能相见，缺乏偶遇的惊喜。
*   **启示**: 分线是技术必须，但不能让社交也随之分层。

### 2.2 光遇 (Sky: Children of the Light) - *陪伴感的极致*
*   **机制**: **“小黑人” (Shadows)**。同一地图不同房间的玩家显示为灰色轮廓。通过点亮烛火（交互）才能看到真身并合并线路。
*   **优点**: 极低成本提供了“有人在”的温馨感，且交互极具仪式感。
*   **启示**: **“虚影”** 是解决 MMO 分线孤独感的最佳视觉方案。

### 2.3 战火勋章 (Warpath) - *解决地块冲突的钥匙*
*   **机制**: **基地车 (Base-to-Vehicle)**。基地不再是永久固定的不动产，而是可以打包移动的载具。
*   **优点**: 彻底解决了 SLG 传统的“迁城死锁”问题（目标点被占就无法迁城）。如果目标点有人，就在旁边空地展开。
*   **启示**: **“可移动主城”** 是实现多线路自由迁移的核心解法。

### 2.4 动物森友会 (Animal Crossing) - *社交的原动力*
*   **机制**: **特产与大头菜**。每个人的岛屿特产不同（苹果/梨），且大头菜收购价不同。
*   **优点**: 纯粹的利益驱动让玩家**主动**去寻找陌生人社交。
*   **启示**: 必须创造**“非去不可”**的理由，光靠友情是不够的，利益才是第一推动力。

### 2.5 死亡搁浅 / 燕云十六声 - *异步的温情*
*   **机制**: **环境痕迹 (Traces)**。玩家留下的梯子、路牌会异步刷新在别人的世界里。
*   **启示**: 即使不在线，玩家的主城/建筑也应作为**“离线地标”**发挥社交作用。

---

## 3. 方案发散与设计 (Design Exploration)

基于上述拆解，为了满足不同开发成本和创新风险的考量，我们提供三套不同维度的解决方案，特别关注 **“生人社交与破冰”** 的实现：

### 方案 A：保守派 - 经典 MMO 改良 (Classic MMO+)
> **核心参考**: *World of Warcraft / Guild Wars 2 / Destiny 2*
> **关键词**: 镜像位面、动态公共事件、强制协作

*   **一句话体验**: “我们素不相识，但为了打这个Boss，我们必须肩并肩。”
*   **核心机制**:
    *   **感知 (Perception)**:
        *   **完全隔离**: 不同线路玩家不可见，不显示虚影。
        *   **UI 连接**: 依靠聊天频道和好友列表查找其他线玩家。
    *   **交互 (Interaction)**:
        *   **机制**: **强组队同步 (Party Sync)**。
        *   **流程**: 玩家 A 发起组队邀请 -> 玩家 B 接受 -> 系统询问 B “是否传送到队长所在线路？” -> B 确认 -> B 获得临时跨线资格 -> 两人见面。
    *   **破冰 (Ice-breaking)**: **动态公共事件 (Dynamic Public Events)**。
        *   **触发**: 系统公告“第 3 线出现世界 Boss / 裂隙入侵”。
        *   **流程**: 全服玩家看到公告 -> 点击“前往集结” -> 自动分配至第 3 线临时团队 -> 落地即开打。
        *   **转化**: 战斗无需言语，但战斗结束后，系统弹出“是否添加身边的战友为好友？”，并刷新**“营火晚会”** Buff点，大家必须围坐在一起回血，创造强制的聊天/加好友窗口。
    *   **迁移 (Migration)**:
        *   **机制**: **定点搬迁 (Fixed Relocation)**。
        *   **流程**: 购买“迁城令” -> 在大地图选择目标线路的空地 -> 点击“迁移” -> 判定目标点无障碍物 -> 瞬间传送主城。
        *   **痛点**: 如果目标线路该坐标已有玩家，则迁移失败，需重新选址。
*   **优缺点**:
    *   ✅ **开发成本低**: 成熟技术，逻辑简单。
    *   ✅ **战斗破冰**: 战斗情谊最容易转化为社交关系。
    *   ❌ **平时割裂**: 没活动的时候就是单机，缺乏自发的社交契机。
    *   ❌ **迁移死锁**: 热门线路好地段永远被占，后进玩家无法搬入。

### 方案 B：融合派 - 动森/Warpath 混合体 (Hybrid Integration) - **(推荐方案)**
> **核心参考**: *Animal Crossing / Warpath / Sky*
> **关键词**: 虚影陪伴、移动基地、互助救援

*   **一句话体验**: “身在异界，心有灵犀；一方有难，八方支援。”
*   **核心机制**:
    *   **感知 (Perception)**:
        *   **虚影 (Ghost)**: 本线路人数 < 10 人时，系统自动投射邻近线路玩家的“半透明虚影”。
        *   **状态可视化**: 虚影不仅是模型，更携带状态。如“战斗中”显示武器，“濒死”显示红色，“闲逛”显示常规。
    *   **交互 (Interaction)**:
        *   **机制**: **点击交互菜单 (Context Menu)**。
        *   **流程**: 点击虚影 -> 弹出菜单（打招呼/查看资料/邀请组队）。若双方互相关注或使用“显影粉尘”，可短暂实体化见面。
    *   **破冰 (Ice-breaking)**: **求助、墓碑与漂流瓶**。
        *   **SOS 救援 (同步)**: 
            *   **联系**: 虚影状态与社交的强关联。当一名玩家在异界**重伤濒死**时，其虚影在所有线路都会高亮并发出求救信号。
            *   **流程**: 陌生人看到红色虚影 -> 响应救援 -> 临时跨线传送至伤者身边 -> 施法复活 -> 获得高额“英雄点数” -> 自动互相关注。
        *   **墓碑与遗物 (Tombstones & Relics) - *新增***:
            *   **机制**: 玩家死亡后若未被及时救援，会在原地留下“跨线墓碑”，包含掉落的部分道具。
            *   **人性抉择**: 陌生人发现墓碑后，可选择 **[归还]**（获得感谢与善缘）或 **[私吞]**（获得物资但结仇）。通过“归还遗物”这一高尚行为瞬间拉近社交距离。
        *   **漂流瓶 (Drift Bottles)**: 
            *   **区别**: 不同于定点路牌，它是**随机流向**陌生人海岸的“缘分盲盒”。
            *   **流程**: 将多余道具/心情文字放入瓶中扔进海里 -> 瓶子随机漂流到陌生人线路的海岸 -> 陌生人拾取并回复 -> 开启跨线聊天。
    *   **迁移 (Migration)**:
        *   **机制**: **基地车 (Base-to-Vehicle)** - *Warpath 模式*。
        *   **流程**: 玩家将主城打包为“基地车”形态 -> 驾驶车辆驶入“位面传送门” -> 选择目标线路 -> 驶出传送门 -> 寻找空地 -> 点击“展开基地”。
        *   **冲突解决**: 如果目标点被占，基地车只需开到旁边空地展开即可，彻底解决了“坐标被占导致无法迁城”的死锁。
*   **优缺点**:
    *   ✅ **体验闭环**: 平衡了陪伴与资源，虚影提供了“有人气”的氛围。
    *   ✅ **利他破冰**: 利用“英雄主义”和“好奇心”驱动互动，比单纯的利益驱动更具人情味。
    *   ✅ **迁移灵活**: 基地车机制完美适配 SLG 的多线迁移需求。
    *   ❌ **复杂度中等**: 需处理跨线数据同步及基地车移动逻辑。

### 方案 C：激进派 - 平行宇宙量子纠缠 (Quantum Entanglement)
> **核心参考**: *Death Stranding / Journey / Dark Souls*
> **关键词**: 异步共建、时空留言、共鸣

*   **一句话体验**: “我们看不见彼此，但我在你的留言里找到了力量。”
*   **核心机制**:
    *   **感知 (Perception)**:
        *   **纯异步**: 完全看不到其他玩家实体或虚影。
        *   **痕迹**: 只能看到别人留下的痕迹（路牌、梯子、桥梁、废弃货物）。
    *   **交互 (Interaction)**:
        *   **机制**: **点赞与共建 (Like & Build)**。
        *   **流程**: 遇到断崖 -> 发现别人留下的梯子 -> 使用梯子并通过 -> 点击“点赞” -> 建造者收到提示并获得资源。
    *   **破冰 (Ice-breaking)**: **共鸣回响 (Resonance)**。
        *   **时空留言**: 玩家在风景绝美或关卡极难处留下“前有绝景”或“快逃”的留言。
        *   **幻影重演**: 触碰高赞留言/痕迹时，会回放留下该痕迹玩家当时的几秒“幻影动作”（如欢呼、绝望倒地）。这种“跨越时空的情感共鸣”是极强的破冰瞬间。
    *   **迁移 (Migration)**:
        *   **机制**: **数据重构 (Digital Reconstruction)**。
        *   **流程**: 玩家无需物理移动 -> 在新线路选址 -> 发送“重构请求” -> 旧主城数据上传 -> 新主城由纳米机器人从零开始快速打印建造。
*   **优缺点**:
    *   ✅ **极度创新**: 营造独特的孤独美学，艺术感拉满。
    *   ✅ **无压社交**: 社恐福音，不需要实时说话，仅靠默契互动。
    *   ❌ **门槛过高**: 缺乏即时反馈，难以满足 MMO 玩家“现在就要带我打本/PVP”的即时需求，不适合大众化商业网游。

---

## 4. 决策收敛 (Decision Matrix)

| 维度 | 方案 A (保守派) | 方案 B (融合派) 👑 | 方案 C (激进派) |
| :--- | :--- | :--- | :--- |
| **生人破冰** | 中 (战斗协作) | **高 (互助/好奇)** | 低 (异步共鸣) |
| **社交真实感** | 低 (副本感强) | **高 (实体+虚影)** | 中 (唯心/异步) |
| **技术风险** | 低 | **中** | 高 (算法复杂) |
| **SLG 适配度** | 差 (地块锁死) | **优 (基地车)** | 差 (无法集结) |
| **创新度** | ⭐ | ⭐⭐⭐ | ⭐⭐⭐⭐⭐ |
| **推荐指数** | 20% | **80%** | 0% (主要是不适合SLG) |

> **结论**: 推荐采用 **方案 B (融合派)**。它通过“SOS救援”和“漂流瓶”提供了最自然的陌生人破冰理由，既保留了 MMO 的陪伴感，又用 Warpath 的载具机制解决了 SLG 的地块冲突，是一个集大成且逻辑自洽的方案。

---

## 5. 详细设计 (Detailed Design - 方案 B)

### 5.1 核心玩法循环 (Gameplay Loop)
1.  **感知**: 在野外看到“虚影”在战斗或发出红光，或在海边捡到一个“漂流瓶”。
2.  **破冰**: 响应“SOS救援”临时跨线救人，或回复漂流瓶建立联系。
3.  **接触**: 因为需要对方线路的特产（如苹果）或Buff，发起“临时拜访”请求。
4.  **连接**: 此时双方已在同一线路，进行面对面互动（点赞、交易、做动作），获得社交货币。
5.  **深化**: 发现志趣相投，或为了公会集结，决定“搬家”到一起。
6.  **共生**: 驾驶“基地车”跨线迁移，在对方家旁边展开基地，形成邻里聚落。

### 5.2 关键机制详解

#### A. 跨线感知与交互 (Perception & Interaction)
*   **动态密度虚影**: 
    *   **规则**: 当本线路同屏人数 < 10 人时，服务器自动拉取邻近线路同坐标玩家数据，渲染为半透明“虚影”。
    *   **交互菜单**: 点击虚影弹出环形菜单：[打招呼] [查看资料] [申请组队] [请求拜访]。
*   **状态同步**: 虚影会实时同步简单的状态动作（待机、跑步、战斗、倒地），让玩家感知到对方是“活”的。

#### B. 破冰机制 (Ice-breaking Mechanics)
*   **SOS 救援系统 (同步交互)**:
    *   **触发**: 玩家 A 在 Line 1 被野怪击倒，进入濒死状态，点击“发送求救”。
    *   **表现**: 玩家 A 的虚影在 Line 2, 3, 4 变为红色高亮，并头顶 SOS 图标。
    *   **响应**: 玩家 B (Line 2) 看到红色虚影 -> 跑近点击交互 -> 选择“救援” -> 读条 3 秒。
    *   **结果**: 玩家 A 复活，玩家 B 获得“善行值”。系统自动提示“是否加为好友？”。**这是最强的强互助破冰。**
*   **墓碑与遗物 (异步人性博弈) - *新增***:
    *   **触发**: 玩家 A 死亡且放弃治疗（或超时），在坐标点生成“墓碑”，墓碑投影至邻近分线。
    *   **交互**: 玩家 B (Line 2) 路过发现墓碑，交互弹出界面：“其中有 [木材x100, 蓝装x1]”。
    *   **抉择**:
        *   **[归还]**: 道具通过系统邮件发给 A。A 收到提示：“玩家 B 在异界拾取了你的遗物并归还。” -> A 感激涕零 -> 发送好友申请/感谢信。
        *   **[私吞]**: B 获得道具，但变为“灰名”状态，且 A 会收到“遗物已被盗墓者 B 拿走”的复仇提示。
*   **漂流瓶 (随机缘分)**: 
    *   **定义**: 非定点的信息传递。不同于“路牌”固定在某地，漂流瓶随海浪随机出现在陌生人的海岸线上。
    *   **机制**: 每天可扔 3 个，捡 3 个。放入心情/小礼物 -> 随机分发 -> 拾取回复。

#### C. 主城迁移与地块冲突 (Migration & Conflict)
*   **核心痛点**: 传统 SLG 迁城时，如果目标坐标有阻挡（山脉、其他玩家），则无法迁城。
*   **解决方案**: **基地车 (Base Vehicle)**。
*   **完整流程**:
    1.  **打包**: 玩家在主界面点击“迁城” -> 主城建筑播放折叠动画 -> 变为一辆“基地车”单位。
    2.  **跨线**: 操控基地车移动 -> 使用“跨线引擎”道具 -> 选择 Line X -> 屏幕转场 -> 基地车出现在 Line X 的随机边缘或信标处。
    3.  **选址**: 玩家驾驶基地车在 Line X 大地图自由行驶，寻找风水宝地。
    4.  **展开**: 
        *   **情况 A (空地)**: 点击“展开” -> 基地车变回主城。
        *   **情况 B (有人)**: 目标点已被玩家 C 占据。玩家只能将车开到旁边 100 米处的空地 -> 点击“展开”。
    *   **结论**: 只要地图还有空地，玩家就永远可以迁入，不存在“坐标锁死”问题。

---

## 6. 与 SLG核心 的结合分析 (Integration with SLG Core)

### 6.1 填补长草期 (Filling the Void) - *PVE/探索期*
*   **痛点**: 传统 ROK 类游戏前期只有打野和采集，等待时间极其枯燥，容易导致非核心 SLG 用户流失。
*   **结合**:
    *   **虚影陪伴**: 在枯燥的采集等待中，看到旁边有其他线路玩家的虚影也在采集，甚至可以互相做一个表情，极大缓解了“单机感”。
    *   **漂流瓶**: 提供了碎片化的惊喜感，让玩家在等待造兵/建筑升级时有事可做。

### 6.2 社交圈层渗透 (Social Permeation) - *联盟发育期*
*   **痛点**: 传统 SLG 社交高度封闭，仅限于联盟内部（私域社交）。玩家除了盟友就是死敌，缺乏“中间态”的社交关系，导致世界显得冷漠。
*   **结合**:
    *   **破壁效应**: 轻社交机制（虚影、漂流瓶、墓碑）是穿透联盟壁垒的工具。玩家在野外能接触到**非盟友、非敌人**的第三类人（路人）。
    *   **关系转化**: 通过一次偶然的“跨线救援”或“遗物归还”，可能将一个路人转化为潜在的盟友，甚至促进两个联盟的友好外交。这是传统 GVG 玩法无法提供的**柔性连接**。

### 6.3 避免死服效应 (Combating "Dead Server") - *长线运营期*
*   **痛点**: 随着游戏生命周期推移，单线活跃人数必然下降。在不合服的情况下，玩家会感到世界极度空旷（鬼服感），加速流失。
*   **结合**:
    *   **视觉丰满度**: 即使本线路只有我一个人，系统通过**动态密度算法**拉取其他 9 条线路的活跃玩家投影为虚影。
    *   **体验**: 玩家依然能看到熙熙攘攘的人群在跑动、打怪、发光。虽然他们处于平行世界，但这种**“虚假的繁荣”**在心理上极其重要，能有效维持游戏的“人气感”和玩家的安全感。
    *   **注意**: 所有分线区域严格定义为 **PVE 安全区**。GVG 和核心 PVP 争夺区（如圣所、关卡）**绝不分线**，强制所有玩家实体同屏，保证战争的残酷性和真实性。跨线机制仅服务于日常陪伴，不干扰核心战争公平性。

---

## 7. 后续规划 (Future Planning)

*   **技术预研**: 验证“基地车”形态下的寻路与碰撞检测性能。
*   **UI/UX 设计**: 设计“异界虚影”的视觉效果（既要明显又不能干扰视线）。
